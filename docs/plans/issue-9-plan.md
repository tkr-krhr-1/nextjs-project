# 実装プラン: ⚙️ 記事作成フォームとバリデーションの実装 (#9)

## 概要

記事作成フォームの UI 向上と、Zod を用いた堅牢なバリデーションの実装を行います。

## タスク

- [ ] 依存関係の追加 (`zod`, `react-markdown`)
- [ ] Zod スキーマの定義 (`src/lib/schema.ts`)
- [ ] `createPost` アクションのリファクタリング
  - Zod によるバリデーションの実装
  - エラーメッセージの日本語化と詳細化
- [ ] `NewPostPage` の UI 改善
  - 各フィールドのバリデーションエラー表示
  - `react-markdown` を使用した本格的なプレビュー表示
  - スラッグのリアルタイム形式チェック（オプション）

## 詳細

### 1. 依存関係の追加

```bash
npm install zod react-markdown
```

### 2. スキーマ定義

`src/lib/schema.ts` を作成し、記事のバリデーションルールを定義します。

- タイトル: 必須、最大文字数
- スラッグ: 必須、形式（英数字・ハイフン）、重複チェック
- 概要: 必須、最大文字数
- 本文: 必須

### 3. Server Action の修正

`src/lib/actions.ts` の `createPost` を修正し、Zod スキーマを使用して入力を検証します。
重複チェックはファイルシステムの存在確認で行います。

### 4. UI の改善

`src/app/admin/new/page.tsx` を修正します。

- `useActionState` から返されるエラーをフィールドごとに表示できるようにします。
- プレビュー部分に `react-markdown` を導入し、実際の表示に近い形で確認できるようにします。
